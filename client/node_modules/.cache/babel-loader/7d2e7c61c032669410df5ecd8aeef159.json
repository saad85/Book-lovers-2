{"ast":null,"code":"var _jsxFileName = \"E:\\\\graphQl\\\\client\\\\src\\\\Utlies\\\\add-review-modals.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Tooltip } from \"reactstrap\";\nimport \"./add-review-modal.css\";\nimport { gql, useMutation, useQuery } from \"@apollo/client\";\nimport CustomDropdown from \"./dropdown/dropdown\";\nconst ADD_REVIEW = gql`\n  mutation AddReview(\n    $title: String!\n    $author: String!\n    $genre: String\n    $desc: String\n  ) {\n    addReview(title: $title, author: $author, genre: $genre, desc: $desc) {\n      title\n      author\n      genre\n      desc\n    }\n  }\n`;\nconst ADD_AUTHOR = gql`\n  mutation AddAuthor($authorName: String!) {\n    addAuthor(name: $authorName) {\n      name\n    }\n  }\n`;\nconst AUTHORS = gql`\n  query GetAuthors {\n    authors {\n      _id\n      name\n    }\n  }\n`;\n\nconst AddReviewModal = props => {\n  const {\n    className\n  } = props;\n  const [modal, setModal] = useState(true);\n  const [title, setTitle] = useState(true);\n  const [author, setAuthor] = useState(true);\n  const [genre, setGenre] = useState(\"\");\n  const [desc, setDesc] = useState(true);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [showAddNewAurthor, setShowAddNewAurthor] = useState(false);\n  const [readOnly, setReadOnly] = useState(false);\n  const [authorsList, setAuthorsList] = useState([]);\n  const [selectedAuthor, setSelectedAuthor] = useState('');\n  const [addTooltipOpen, setAddTooltipOpen] = useState(false);\n  const [backTooltipOpen, setBackTooltipOpen] = useState(false);\n\n  const addToggleTooltip = () => setAddTooltipOpen(!addTooltipOpen);\n\n  const backToggleTooltip = () => setBackTooltipOpen(!backTooltipOpen);\n\n  const [addReview, {\n    reviewData\n  }] = useMutation(ADD_REVIEW);\n  const [addAuthor, {\n    authordata\n  }] = useMutation(ADD_AUTHOR);\n  const {\n    error,\n    loading,\n    data\n  } = useQuery(AUTHORS);\n\n  const toggle = () => setModal(!modal);\n\n  function setAuthorFromDropdow(value) {\n    setSelectedAuthor(value);\n    console.log(\"value come from dropdown \", value);\n    console.log(\"Author id after selected \", selectedAuthor);\n  }\n\n  function closeModal() {\n    setModal(!modal);\n\n    if (props.closeModal) {\n      setTimeout(() => {\n        props.closeModal(false);\n      }, 100);\n    }\n  }\n\n  useEffect(() => {\n    if (props.updateReview) props.updateReview();\n\n    if (data && data.authors && data.authors.length > 0) {\n      console.log(\"data.authors\", data.authors);\n      setAuthorsList(data.authors);\n    }\n\n    return () => {};\n  }, [data]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modal,\n    toggle: toggle,\n    className: className,\n    onClosed: () => closeModal(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggle,\n    style: {\n      backgroundColor: \"#f7f7f7\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, \"Add review\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, \"Title:\", \" \", /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"add a title\",\n    onChange: e => {\n      setTitle(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, \"Author:\", !showAddNewAurthor ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CustomDropdown, {\n    menus: authorsList,\n    setParentsAuthor: setAuthorFromDropdow,\n    context: \"authors\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }), \" \", \"or\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"add-new-aurthor\",\n    onClick: e => setShowAddNewAurthor(!showAddNewAurthor),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, \"Add new\"))) : /*#__PURE__*/React.createElement(\"span\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"col-xs-7 col-sm-7 col-md-7 col-lg-7  \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"add new author\",\n    readOnly: readOnly,\n    onChange: e => {\n      setAuthor(e.target.value);\n    },\n    style: {\n      marginTop: \"10px\"\n    },\n    value: author,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \" col-xs-2 col-sm-2 col-md-2 col-lg-2 add-icon\",\n    id: \"addIcon\",\n    onClick: e => {\n      addAuthor({\n        variables: {\n          authorName: author\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-plus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \" col-xs-2 col-sm-2 col-md-2 col-lg-2 add-icon\",\n    id: \"backIcon\",\n    onClick: e => setShowAddNewAurthor(!showAddNewAurthor),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-arrow-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, \"Genre:\", \" \", /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"add genre\",\n    onClick: e => setShowDropdown(true),\n    onChange: e => {\n      setGenre(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  }, \"How was it:\", \" \", /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"Short summary\",\n    style: {\n      width: \"100%\"\n    },\n    onChange: e => {\n      setDesc(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: e => {\n      closeModal();\n      addReview({\n        variables: {\n          title: title,\n          author: author,\n          genre: genre,\n          desc: desc\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-plus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }), \" Add\"))));\n};\n\nexport default AddReviewModal;","map":{"version":3,"sources":["E:/graphQl/client/src/Utlies/add-review-modals.js"],"names":["React","useState","useEffect","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","Tooltip","gql","useMutation","useQuery","CustomDropdown","ADD_REVIEW","ADD_AUTHOR","AUTHORS","AddReviewModal","props","className","modal","setModal","title","setTitle","author","setAuthor","genre","setGenre","desc","setDesc","showDropdown","setShowDropdown","showAddNewAurthor","setShowAddNewAurthor","readOnly","setReadOnly","authorsList","setAuthorsList","selectedAuthor","setSelectedAuthor","addTooltipOpen","setAddTooltipOpen","backTooltipOpen","setBackTooltipOpen","addToggleTooltip","backToggleTooltip","addReview","reviewData","addAuthor","authordata","error","loading","data","toggle","setAuthorFromDropdow","value","console","log","closeModal","setTimeout","updateReview","authors","length","backgroundColor","e","target","marginTop","variables","authorName","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Button,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  ModalFooter,\r\n  Input,\r\n  Tooltip,\r\n} from \"reactstrap\";\r\nimport \"./add-review-modal.css\";\r\nimport { gql, useMutation, useQuery } from \"@apollo/client\";\r\nimport CustomDropdown from \"./dropdown/dropdown\";\r\n\r\nconst ADD_REVIEW = gql`\r\n  mutation AddReview(\r\n    $title: String!\r\n    $author: String!\r\n    $genre: String\r\n    $desc: String\r\n  ) {\r\n    addReview(title: $title, author: $author, genre: $genre, desc: $desc) {\r\n      title\r\n      author\r\n      genre\r\n      desc\r\n    }\r\n  }\r\n`;\r\n\r\nconst ADD_AUTHOR = gql`\r\n  mutation AddAuthor($authorName: String!) {\r\n    addAuthor(name: $authorName) {\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nconst AUTHORS = gql`\r\n  query GetAuthors {\r\n    authors {\r\n      _id\r\n      name\r\n    }\r\n  }\r\n`;\r\n\r\nconst AddReviewModal = (props) => {\r\n  const { className } = props;\r\n\r\n  const [modal, setModal] = useState(true);\r\n  const [title, setTitle] = useState(true);\r\n  const [author, setAuthor] = useState(true);\r\n  const [genre, setGenre] = useState(\"\");\r\n  const [desc, setDesc] = useState(true);\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [showAddNewAurthor, setShowAddNewAurthor] = useState(false);\r\n  const [readOnly, setReadOnly] = useState(false);\r\n  const [authorsList, setAuthorsList] = useState([]);\r\n  const [selectedAuthor, setSelectedAuthor] = useState('');\r\n\r\n  const [addTooltipOpen, setAddTooltipOpen] = useState(false);\r\n  const [backTooltipOpen, setBackTooltipOpen] = useState(false);\r\n\r\n  const addToggleTooltip = () => setAddTooltipOpen(!addTooltipOpen);\r\n  const backToggleTooltip = () => setBackTooltipOpen(!backTooltipOpen);\r\n\r\n  const [addReview, { reviewData }] = useMutation(ADD_REVIEW);\r\n  const [addAuthor, { authordata }] = useMutation(ADD_AUTHOR);\r\n  const { error, loading, data } = useQuery(AUTHORS);\r\n\r\n  const toggle = () => setModal(!modal);\r\n\r\n  function setAuthorFromDropdow(value){\r\n    setSelectedAuthor(value);\r\n\r\n    console.log(\"value come from dropdown \",value);\r\n    console.log(\"Author id after selected \",selectedAuthor);\r\n  }\r\n\r\n  function closeModal() {\r\n    setModal(!modal);\r\n\r\n    if (props.closeModal) {\r\n      setTimeout(() => {\r\n        props.closeModal(false);\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (props.updateReview) props.updateReview();\r\n\r\n    if (data && data.authors && data.authors.length > 0) {\r\n      console.log(\"data.authors\", data.authors);\r\n      setAuthorsList(data.authors);\r\n    }\r\n    return () => {};\r\n  }, [data]);\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        isOpen={modal}\r\n        toggle={toggle}\r\n        className={className}\r\n        onClosed={() => closeModal()}\r\n      >\r\n        <ModalHeader toggle={toggle} style={{ backgroundColor: \"#f7f7f7\" }}>\r\n          Add review\r\n        </ModalHeader>\r\n        <ModalBody>\r\n          <div>\r\n            <div className=\"form-field\">\r\n              Title:{\" \"}\r\n              <Input\r\n                placeholder=\"add a title\"\r\n                onChange={(e) => {\r\n                  setTitle(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-field\">\r\n              Author:\r\n              {!showAddNewAurthor ? (\r\n                <div>\r\n                  <>\r\n                    <CustomDropdown\r\n                      menus={authorsList}\r\n                      setParentsAuthor={setAuthorFromDropdow}\r\n                      context = 'authors'\r\n                    />{\" \"}\r\n                    or{\" \"}\r\n                    <span\r\n                      className=\"add-new-aurthor\"\r\n                      onClick={(e) => setShowAddNewAurthor(!showAddNewAurthor)}\r\n                    >\r\n                      Add new\r\n                    </span>\r\n                  </>\r\n                </div>\r\n              ) : (\r\n                <span className=\"row\">\r\n                  <span className=\"col-xs-7 col-sm-7 col-md-7 col-lg-7  \">\r\n                    <Input\r\n                      placeholder=\"add new author\"\r\n                      readOnly={readOnly}\r\n                      onChange={(e) => {\r\n                        setAuthor(e.target.value);\r\n                      }}\r\n                      style={{ marginTop: \"10px\" }}\r\n                      value={author}\r\n                    />\r\n                  </span>\r\n                  <span\r\n                    className=\" col-xs-2 col-sm-2 col-md-2 col-lg-2 add-icon\"\r\n                    id=\"addIcon\"\r\n                    onClick={(e) => {\r\n                      addAuthor({ variables: { authorName: author } });\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-plus\"></i>\r\n                  </span>\r\n                  <span\r\n                    className=\" col-xs-2 col-sm-2 col-md-2 col-lg-2 add-icon\"\r\n                    id=\"backIcon\"\r\n                    onClick={(e) => setShowAddNewAurthor(!showAddNewAurthor)}\r\n                  >\r\n                    <i className=\"fas fa-arrow-left\"></i>\r\n                  </span>\r\n\r\n                  {/* <Tooltip placement=\"bottom\" isOpen={addTooltipOpen} target=\"addIcon\" toggle={addToggleTooltip}>\r\n                            Add \r\n                          </Tooltip>\r\n                          <Tooltip placement=\"bottom\" isOpen={backTooltipOpen} target=\"backIcon\" toggle={backToggleTooltip}>\r\n                            Back\r\n                          </Tooltip> */}\r\n                </span>\r\n              )}\r\n              <div></div>\r\n            </div>\r\n\r\n            <div className=\"form-field\">\r\n              Genre:{\" \"}\r\n              <Input\r\n                placeholder=\"add genre\"\r\n                onClick={(e) => setShowDropdown(true)}\r\n                onChange={(e) => {\r\n                  setGenre(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-field\">\r\n              How was it:{\" \"}\r\n              <textarea\r\n                placeholder=\"Short summary\"\r\n                style={{ width: \"100%\" }}\r\n                onChange={(e) => {\r\n                  setDesc(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </ModalBody>\r\n        <ModalFooter>\r\n          <Button\r\n            color=\"secondary\"\r\n            onClick={(e) => {\r\n              closeModal();\r\n              addReview({\r\n                variables: {\r\n                  title: title,\r\n                  author: author,\r\n                  genre: genre,\r\n                  desc: desc,\r\n                },\r\n              });\r\n            }}\r\n          >\r\n            <i className=\"fas fa-plus\"></i> Add\r\n          </Button>\r\n        </ModalFooter>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddReviewModal;\r\n"]},"metadata":{},"sourceType":"module"}