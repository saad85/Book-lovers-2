{"ast":null,"code":"var _jsxFileName = \"E:\\\\graphQl\\\\client\\\\src\\\\Utlies\\\\dropdown\\\\dropdown.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { FilterContext } from \"../../context-helper/context-helper\";\nimport \"./dropdown.css\";\n\nconst CustomDropdown = props => {\n  const {\n    dropdownId,\n    context,\n    placeholder\n  } = props;\n  const [menus, setMenus] = useState([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(placeholder);\n  const {\n    rootGenre,\n    setRootGenreFilter,\n    authorFilter\n  } = useContext(FilterContext);\n  useEffect(() => {\n    if (props.menus) {\n      let propsMenu = props.menus ? props.menus : [],\n          updatedList = [];\n\n      if (context === 'authors') {\n        //update menu list in just text,value\n        let updatedAuthorsList = propsMenu.map(author => {\n          return {\n            text: author.name,\n            value: author._id\n          };\n        });\n        updatedList = updatedAuthorsList;\n      } else if (context === 'genre') {\n        //update menu list in just text,value\n        let updatedGenreList = propsMenu.map(genre => {\n          return {\n            text: genre,\n            value: genre\n          };\n        });\n        updatedList = updatedGenreList;\n      }\n\n      setMenus(updatedList);\n    }\n\n    return () => {};\n  }, [props.menus]);\n\n  function showOrCloseDropdown() {\n    if (document.getElementById(dropdownId)) {\n      setIsOpen(!isOpen);\n      document.getElementById(dropdownId).classList.toggle(\"show\");\n    }\n  }\n\n  function filterFunction(value) {\n    var input, filter, ul, li, a, i;\n    input = document.getElementById(\"myInput\") ? document.getElementById(\"myInput\") : \"\";\n    filter = input ? input.value.toUpperCase() : \"\";\n    let div = document.getElementById(dropdownId) ? document.getElementById(dropdownId) : \"\";\n    a = div ? div.getElementsByTagName(\"a\") : \"\";\n\n    for (i = 0; i < a.length; i++) {\n      let txtValue = a[i].textContent || a[i].innerText;\n\n      if (txtValue.toUpperCase().indexOf(filter) > -1) {\n        if (a[i]) a[i].style.display = \"\";\n      } else {\n        if (a[i]) a[i].style.display = \"none\";\n      }\n    }\n  }\n\n  function setSelectedValue(selectedItem) {\n    const {\n      text,\n      value\n    } = selectedItem;\n    if (text) setSelectedItem(text);else setSelectedItem(placeholder);\n    if (context === 'authors' && props.setParentsAuthor) props.setParentsAuthor(text, value);\n    if (context === 'genre' && props.setParentsGenre) props.setParentsGenre(text, value);\n    if (context === 'genre' && setRootGenreFilter) setRootGenreFilter(value);\n    if (context === 'authors' && authorFilter && authorFilter.setRootAuthorFilter) authorFilter.setRootAuthorFilter(value);\n    showOrCloseDropdown();\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => showOrCloseDropdown(),\n    className: \"dropbtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, selectedItem, \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"icon-continer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 27\n    }\n  }, isOpen ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-chevron-up icon-class\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 69\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-chevron-down\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 120\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    id: dropdownId,\n    className: \"dropdown-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search..\",\n    id: \"myInput\",\n    onKeyUp: e => filterFunction(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }), selectedItem && selectedItem !== placeholder ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"clear-btn\",\n    onClick: e => {\n      setSelectedValue('', '');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 59\n    }\n  }, \" clear\") : null, menus.map((menu, index) => /*#__PURE__*/React.createElement(\"a\", {\n    key: index,\n    href: \"#about\",\n    className: \"menu\",\n    onClick: e => setSelectedValue(menu),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, menu.text)))));\n};\n\nexport default CustomDropdown;","map":{"version":3,"sources":["E:/graphQl/client/src/Utlies/dropdown/dropdown.js"],"names":["React","useState","useEffect","useContext","FilterContext","CustomDropdown","props","dropdownId","context","placeholder","menus","setMenus","isOpen","setIsOpen","selectedItem","setSelectedItem","rootGenre","setRootGenreFilter","authorFilter","propsMenu","updatedList","updatedAuthorsList","map","author","text","name","value","_id","updatedGenreList","genre","showOrCloseDropdown","document","getElementById","classList","toggle","filterFunction","input","filter","ul","li","a","i","toUpperCase","div","getElementsByTagName","length","txtValue","textContent","innerText","indexOf","style","display","setSelectedValue","setParentsAuthor","setParentsGenre","setRootAuthorFilter","e","target","menu","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { FilterContext } from \"../../context-helper/context-helper\";\r\nimport \"./dropdown.css\";\r\n\r\nconst CustomDropdown = (props) => {\r\n\r\n  const { dropdownId, context, placeholder } = props;\r\n  const [menus, setMenus] = useState([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(placeholder);\r\n  const {rootGenre, setRootGenreFilter,authorFilter} = useContext(FilterContext);\r\n\r\n  useEffect(() => {\r\n    if (props.menus) {\r\n\r\n      let propsMenu =props.menus ? props.menus : [],\r\n      updatedList = [];\r\n\r\n      if(context === 'authors') {\r\n\r\n        //update menu list in just text,value\r\n        let updatedAuthorsList =  propsMenu.map((author)=> {\r\n          return {\r\n            text: author.name,\r\n            value:author._id\r\n          }\r\n        });\r\n\r\n        updatedList = updatedAuthorsList;\r\n      \r\n      } else if(context === 'genre') {\r\n        //update menu list in just text,value\r\n        let updatedGenreList =  propsMenu.map((genre)=> {\r\n          return {\r\n            text: genre,\r\n            value:genre\r\n          }\r\n        });\r\n\r\n\r\n        updatedList = updatedGenreList;\r\n      }\r\n\r\n      setMenus(updatedList);\r\n    }\r\n\r\n    return () => {};\r\n  }, [props.menus]);\r\n\r\n  function showOrCloseDropdown() {\r\n    if (document.getElementById(dropdownId)){\r\n      setIsOpen(!isOpen);\r\n      document.getElementById(dropdownId).classList.toggle(\"show\");\r\n    }\r\n      \r\n  }\r\n\r\n  function filterFunction(value) {\r\n    var input, filter, ul, li, a, i;\r\n    input = document.getElementById(\"myInput\")\r\n      ? document.getElementById(\"myInput\")\r\n      : \"\";\r\n    filter = input ? input.value.toUpperCase() : \"\";\r\n    let div = document.getElementById(dropdownId)\r\n      ? document.getElementById(dropdownId)\r\n      : \"\";\r\n    a = div ? div.getElementsByTagName(\"a\") : \"\";\r\n\r\n    for (i = 0; i < a.length; i++) {\r\n      let txtValue = a[i].textContent || a[i].innerText;\r\n      if (txtValue.toUpperCase().indexOf(filter) > -1) {\r\n        if (a[i]) a[i].style.display = \"\";\r\n      } else {\r\n        if (a[i]) a[i].style.display = \"none\";\r\n      }\r\n    }\r\n  }\r\n\r\n  function setSelectedValue(selectedItem){\r\n\r\n    const {text,value} = selectedItem;\r\n      \r\n    if(text)setSelectedItem(text);\r\n    else setSelectedItem(placeholder);\r\n\r\n    if(context === 'authors' && props.setParentsAuthor) props.setParentsAuthor(text,value);\r\n    if(context === 'genre' && props.setParentsGenre) props.setParentsGenre(text,value);\r\n    \r\n    if(context === 'genre' && setRootGenreFilter) setRootGenreFilter(value);\r\n    if(context === 'authors' && authorFilter && authorFilter.setRootAuthorFilter) authorFilter.setRootAuthorFilter(value);\r\n      \r\n    showOrCloseDropdown();\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"dropdown\">\r\n        <button onClick={(e) => showOrCloseDropdown()} className=\"dropbtn\">\r\n           {selectedItem} <span className=\"icon-continer\">{isOpen ? <i className=\"fas fa-chevron-up icon-class\"></i> : <i className=\"fas fa-chevron-down\"></i>}</span>\r\n        </button>\r\n        <div id={dropdownId} className=\"dropdown-content\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search..\"\r\n            id=\"myInput\"\r\n            onKeyUp={(e) => filterFunction(e.target.value)}\r\n          />\r\n\r\n          {selectedItem && selectedItem !== placeholder ? <div className=\"clear-btn\" onClick={e=>{setSelectedValue('','')}}> clear</div> : null}\r\n\r\n\r\n          {menus.map((menu, index) => (\r\n            <a\r\n              key={index}\r\n              href=\"#about\"\r\n              className=\"menu\"\r\n              onClick={(e) => setSelectedValue(menu)}\r\n            >\r\n              {menu.text}\r\n            </a>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CustomDropdown;\r\n"]},"metadata":{},"sourceType":"module"}